#!/bin/sh

set -eu

# XXX "Welcome to ratpoison!" is nasty
/usr/bin/ratpoison & ratpoison_pid=$!

export PUAVO_SESSION_LANGUAGE=$(webkiosk-language-selector)

kill -9 "$ratpoison_pid"

# Logout user automatically if nothing has been done in 10 minutes
xautolock -locker "kill -9 -1" -time 10 &

# Automatically start firefox after session is opened
mkdir -p ~/.config/autostart
cp /usr/share/applications/firefox-esr.desktop ~/.config/autostart/

exec /usr/lib/puavo-ltsp-client/desktop-session "$@"
