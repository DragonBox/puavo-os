#!/usr/bin/rake -f

require 'json'

image_dir  = ENV['image_dir']
rdiffs_dir = ENV['rdiffs_dir']

raise '"image_dir" environment variable not defined' \
  if image_dir.nil? || image_dir.empty?

raise '"rdiffs_dir" environment variable not defined' \
  if rdiffs_dir.nil? || rdiffs_dir.empty?

image_series_json_path = 'images.json'

image_series = JSON.parse( File.read(image_series_json_path) )

#
# tasks
#

task :default => :rdiffs

task :rdiffs => image_series_json_path do |t|
  # this is the rdiff task
end
